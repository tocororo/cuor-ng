<mat-card>
    <mat-card-title-group>
        <mat-card-title>Edita la organización seleccionada</mat-card-title>
        <!-- <mat-card-subtitle>Subtitle</mat-card-subtitle> -->
        <!-- <img matCardImage src="Side image"> -->
    </mat-card-title-group>
    <!-- <img matCardImage src="Card wide image source"> -->
    <mat-card-content>

        <form [formGroup]="orgFormGroup">

            <!-- Start Name -->
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Nombre</mat-label>
                <input matInput placeholder="Escriba el nombre de la Organización" [value]="org.name"
                    formControlName="name">
            </mat-form-field>
            <!-- End Name -->

            <!-- Start Status -->
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Estatus</mat-label>
                <input matInput placeholder="Estatus de la Organización" [value]="org.status" formControlName="status">
            </mat-form-field>
            <!-- End Status -->

            <!-- Start Established -->
            <toco-datepicker-year
                 [formControl]="orgFormGroup.controls.established"
                 [label]="'Establecida en'"
                 [touchUi]="false">
            </toco-datepicker-year>

            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Establecida en</mat-label>
                <input matInput [matDatepicker]="dp"
                    placeholder="Seleccione la fecha en que fue establecida la Organización" [value]="org.established"
                    formControlName="established" required>
                <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                <mat-datepicker #dp disabled="false"></mat-datepicker>
            </mat-form-field>
            <!-- End Established -->

            <!-- <static-table *ngIf="org.identifiers && org.identifiers.length"
                [desc]="'Lista de los identificadores de la organización'" [value]="org.identifiers"
                [columnsObjectProperty]="['idtype', 'value']"
                [columnsHeaderText]="['Identifier type', 'Identifier value']">
            </static-table> -->

            <!-- Start Identifiers -->
            <mat-card class="mb-2">
                <mat-card-content formArrayName="identifiers">
                    <p>
                        <mat-label>Identidicadores</mat-label>
                    </p>

                    <div class="w-100 my-outline" *ngFor="let identifier of org.identifiers; let pos = index"
                        [formGroup]="orgFormGroup.controls.identifiers.controls[pos]" fxLayout="row wrap"
                        fxLayoutAlign="space-between center">

                        <mat-form-field class="w-45">
                            <mat-select class="w-100" placeholder="Seleccione el tipo" [value]="identifier.idtype"
                                formControlName="idtype">
                                <mat-option *ngFor="let item of selectOptionsIdType" [value]="item.idtype">
                                    {{ item.value }}</mat-option>
                            </mat-select>
                        </mat-form-field>


                        <mat-form-field class="w-45">
                            <input matInput placeholder="Valor" [value]="identifier.value" formControlName="value">
                        </mat-form-field>

                        <button mat-icon-button matSuffix class="mat-18" (click)="deleteidentifiers(pos)"
                            matTooltip="Eliminar">
                            <mat-icon>close</mat-icon>
                        </button>

                    </div>

                </mat-card-content>
                <mat-card-actions align="end">
                    <button mat-stroked-button color="primary" (click)="addIdentifiers()">Adicionar</button>
                </mat-card-actions>
            </mat-card>
            <!-- End Identifiers -->

            <!-- Start Acronyms -->
            <mat-card class="mb-2">
                <mat-card-content formArrayName="acronyms">
                    <mat-label>Acrónimos</mat-label>
                    <mat-form-field appearance="outline" class="w-100"
                        *ngFor="let acronymo of org.acronyms; let pos = index">
                        <mat-label>Acrónimo {{pos + 1}}</mat-label>
                        <input matInput placeholder="Acrónimo de la Organización" [value]="acronymo"
                            [formControlName]="pos">
                        <button mat-icon-button matSuffix class="mat-18" (click)="deleteAcronyms(pos)"
                            matTooltip="Eliminar">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>

                </mat-card-content>
                <mat-card-actions align="end">
                    <button mat-stroked-button color="primary" (click)="addAcronyms()">Adicionar</button>
                </mat-card-actions>
            </mat-card>
            <!-- End Acronyms -->

            <!-- Start aliases -->
            <mat-card class="mb-2">
                <mat-card-content formArrayName="aliases">
                    <mat-label>Alias</mat-label>
                    <mat-form-field appearance="outline" class="w-100"
                        *ngFor="let acronymo of org.aliases; let pos = index">
                        <mat-label>Acrónimo {{pos + 1}}</mat-label>
                        <input matInput placeholder="Acrónimo de la Organización" [value]="acronymo"
                            [formControlName]="pos">
                        <button mat-icon-button matSuffix class="mat-18" (click)="deleteAliases(pos)"
                            matTooltip="Eliminar">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>

                </mat-card-content>
                <mat-card-actions align="end">
                    <button mat-stroked-button color="primary" (click)="addAliases()">Adicionar</button>
                </mat-card-actions>
            </mat-card>
            <!-- End aliases -->

            <!-- Start Type -->
            <mat-card class="mb-2">
                <mat-card-content formArrayName="types">
                    <mat-label>Tipos</mat-label>
                    <mat-form-field appearance="outline" class="w-100" *ngFor="let type of org.types; let pos = index">
                        <mat-label>Tipo {{pos + 1}}</mat-label>
                        <mat-select class="w-100" placeholder="Seleccione el tipo de Organización" [value]="types"
                            [formControlName]="pos">
                            <mat-option *ngFor="let item of selectOptions" [value]="item.value">{{ item.label }}
                            </mat-option>
                        </mat-select>
                        <button mat-icon-button matSuffix class="mat-18" (click)="deleteTypes(pos)"
                            matTooltip="Eliminar">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>


                </mat-card-content>
                <mat-card-actions align="end">
                    <button mat-stroked-button color="primary" (click)="addTypes()">Adicionar</button>
                </mat-card-actions>
            </mat-card>
            <!-- End Type -->

            <!-- End Relationships -->
            <mat-accordion>
                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Organizaciones Padres
                        </mat-panel-title>
                        <mat-panel-description></mat-panel-description>
                    </mat-expansion-panel-header>

                    <mat-action-list>
                        <ng-container *ngFor="let relation of orgFormGroup.controls.relationships.controls; let pos = index">
                            <button mat-list-item *ngIf="orgRelationships.PARENT.value == relation.value.type"
                                (click)="deleteRelationship(pos)" matTooltip="Click para 'ELIMINAR'" matTooltipClass="tooltip-red">
                                {{ relation.value.label }}
                            </button>
                        </ng-container>
                    </mat-action-list>
                    <mat-action-row>
                        <button mat-stroked-button color="primary" (click)="openDialog(orgRelationships.PARENT.value)">Adicionar</button>
                    </mat-action-row>
                </mat-expansion-panel>

                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Organizaciones Hijas
                        </mat-panel-title>
                        <mat-panel-description></mat-panel-description>
                    </mat-expansion-panel-header>

                    <mat-action-list>
                        <ng-container *ngFor="let relation of orgFormGroup.controls.relationships.controls; let pos = index">
                            <button mat-list-item *ngIf="orgRelationships.CHILD.value == relation.value.type"
                                (click)="deleteRelationship(pos)" matTooltip="Click para 'ELIMINAR'" matTooltipClass="tooltip-red">
                                {{ relation.value.label }}
                            </button>
                        </ng-container>
                    </mat-action-list>
                    <mat-action-row>
                        <button mat-stroked-button color="primary" (click)="openDialog(orgRelationships.CHILD.value)">Adicionar</button>
                    </mat-action-row>
                </mat-expansion-panel>

                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Organizaciones Relacionadas
                        </mat-panel-title>
                        <mat-panel-description></mat-panel-description>
                    </mat-expansion-panel-header>

                    <mat-action-list>
                        <ng-container *ngFor="let relation of orgFormGroup.controls.relationships.controls; let pos = index">
                            <button mat-list-item *ngIf="orgRelationships.RELATED.value == relation.value.type"
                                (click)="deleteRelationship(pos)" matTooltip="Click para 'ELIMINAR'" matTooltipClass="tooltip-red">
                                {{ relation.value.label }}
                            </button>
                        </ng-container>
                    </mat-action-list>
                    <mat-action-row>
                        <button mat-stroked-button color="primary" (click)="openDialog(orgRelationships.RELATED.value)">Adicionar</button>
                    </mat-action-row>
                </mat-expansion-panel>
            </mat-accordion>
            <!-- End Relationships -->

        </form>

    </mat-card-content>
    <mat-card-actions align="start">
        <button mat-button (click)="update()">Editar</button>
        <!-- <button mat-button (click)="onAction(event)">Action2</button> -->

    </mat-card-actions>
    <!-- <mat-card-footer>
        Footer
    </mat-card-footer> -->
</mat-card>